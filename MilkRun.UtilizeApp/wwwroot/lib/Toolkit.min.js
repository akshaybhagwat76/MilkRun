var kit=function(){var n={};return wr=function(){}(),{ajaxDropdown:function(n){$kit.loadAjaxDropdown(n,!1);$("#"+n.id+"-Toolkit").keyup(function(){$(this).change()}).change(function(){$("#"+n.id).val($("#"+n.id+"-Toolkit").val()).trigger("change")});n.prnt!==undefined&&n.prnt.keys.length>0&&$.each(n.prnt.vals,function(t,i){$("#"+i).change(function(){$("#"+n.id).val("");$kit.loadAjaxDropdown(n,!1)})})},popup:function(){},form:function(n){function i(t){function u(){if(n.notok=1,n.ua){var t={url:n.u?n.u:i.attr("action"),success:function(t){typeof t!="object"&&n.ff?i.html(t):(n.sf&&n.sf(t),i.trigger("formsuccess",t));n.notok=0}};$kit.ou(n.ufd,i,t);i.trigger("submit");$kit.ct(n,t,function(){i.trigger("kitload")})}else i.data("fromData",1),n.u&&i.attr("action",n.u),i.submit()}var i=$(this),r;if(!i.data("fromData")&&($kit.prevent(t),!n.bf||n.bf(i)!==!1)&&!n.notok)if(n.c){r=$("<div/>").addClass("modal fade kitModel kit-center");n.p.btns=[{text:n.yes,click:function(){u();r.modal("hide")},k:1},{text:n.no,click:function(){r.modal("hide")},c:1}];$("body").append(r.append($($kit.rdiv("modal-dialog","","")).append($($kit.rdiv("modal-content","","")).append($kit.rdiv("modal-header",n.p.t,"")).append($kit.rdiv("modal-body",n.ms,"")).append($kit.addFooter(n.p.btns,"","","modal-footer")))));r.modal({show:!0}).on("hidden.bs.modal",function(){$("body").find(".kitModel").remove()})}else u()}var t="."+n.cl;$(document).off("submit","."+t).on("submit",t,i)},openpop:function(t,i){function u(n,t){n!==undefined&&n!==null?(n.submit(function(i){var r,u;if(i.preventDefault(),r=$(this).parent(),$kit.frmVal(n))u={type:"POST",cache:!1,data:$(this).serialize(),url:$(this).attr("action"),success:function(n){typeof n!="object"?($(this).off("submit"),r.html(n)):(t.sf&&t.sf(n),t.cs&&t.imodel.modal("hide"),t.rs&&location.reload(),$(this).trigger("formsuccess",n))}},$kit.ct(t,u,function(){});else{$(this).off("submit");return}}),n.trigger("submit")):t.imodel.modal("hide")}var r=n[t],f,e;r.imodel===undefined&&(r.imodel=$("<div/>").addClass("modal fade ").addClass(r.i).attr("id",r.i+"-amm").appendTo($("body")));f=$("<div/>").addClass("modal-dialog").appendTo(r.imodel);r.udb&&(r.p.btns=[{text:r.ot,click:function(){u(r.imodel.find("form"),r)},k:1},{text:r.ct,click:function(){r.imodel.modal("hide")},c:1}]);e={type:"Get",data:i.params,url:r.u,success:function(n){var i=$("<div/>").addClass("modal-content").addClass(r.p.pc&&r.p.pc).append($kit.addModelHeader(r.p.t)).appendTo(f),t;$("<div/>").addClass("modal-body").html(n).appendTo(i);t={show:!0};r.bdrop!==1&&(t=$.extend(t,{backdrop:"static",keyboard:!1}));r.imodel.modal(t).on("shown.bs.modal",function(){r.ol&&r.ol()}).on("hidden.bs.modal",function(){$(this).removeData("bs.modal");$(this).find(".modal-dialog").remove()});i.append($kit.addFooter(r.p.btns,"","","modal-footer"))}};$kit.ct(r,e,function(){r.imodel.find("form").keydown(function(n){n.which===13&&(n.preventDefault(),u(r.imodel.find("form"),r))})})},initpop:function(t){n[t.i]=t}}}(),$kit=new function(){function i(n,t,i){if(t){var r=$("#"+t);n.push({name:i,value:r.val()})}}var n="",t="<span class='kit-ldgcnt'><div class='kit-loading'><span><\/span><\/div><\/span>";this.frmVal=function(n){return typeof $.validator!="undefined"?($.validator.unobtrusive.parse(n),n.valid()):!0};this.loadAjaxDropdown=function(n,r){var u=n.id,s=n.url,f=n.prnt,e=n.parm,o;r&&$("#"+u).val(null);o=[];e!==undefined&&e.keys.length>0&&$.each(e.keys,function(n,t){o.push({name:t,value:e.vals[n]})});f!==undefined&&f.keys.length>0&&$.each(f.keys,function(n,t){i(o,f.vals[n],t)});$.post(s,o,function(i){var f=$("#"+u+"-Toolkit"),e;f.parent().prepend(t);f.empty();typeof i=="object"&&$.each(i,function(n,t){var i="";t.value===$("#"+u).val()&&(i="selected = 'selected'");f.append("<option "+i+' value="'+t.value+'">'+t.text+"<\/option>")});f.parent().find(".kit-ldgcnt").remove();r&&f.trigger("change");n.multi!==undefined&&n.multi.enable&&(typeof f.multiselect!="undefined"?(e={includeSelectAllOption:n.multi.SelectAll,enableFiltering:n.multi.Filtering,filterBehavior:n.multi.filterBy===0?"value":n.multi.filterBy===1?"text":"both",enableCaseInsensitiveFiltering:n.multi.FilteringAny,filterPlaceholder:n.multi.filterPlaceholder,numberDisplayed:n.multi.ShowCount,buttonClass:n.multi.buttonClass,buttonText:function(t){if(t.length===0)return n.multi.Placeholder;if(t.length>n.multi.ShowCount)return t.length+" options selected";var i=[];return t.each(function(){$(this).attr("label")!==undefined?i.push($(this).attr("label")):i.push($(this).html())}),i.join(", ")+""},maxHeight:n.multi.maxHeight>0?n.multi.maxHeight:500},n.multi.templates!==""&&(e.templates={button:"",ul:n.multi.templates}),n.multi.buttontemplates!==""&&(e.buttontemplates=n.multi.buttontemplates),n.multi.type===0?f.multiselect(e):(f.removeAttr("multiple"),e.includeSelectAllOption=!1,f.multiselect(e)),$("#"+u).val()!==undefined&&f.multiselect("select",$("#"+u).val().split(",")),f.multiselect("rebuild"),n.multi.type===0||e.enableFiltering||f.parent().find(".multiselect-item").remove()):console.log("multiselect js is missing"));n.dataFunc!==undefined&&n.dataFunc(i)})};this.prevent=function(n){n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)};this.ct=function(n,t,i){return t.type||(t.type="post"),t.traditional=!0,$.ajax(t).fail(function(){}).always(i)};this.ou=function(n,t,i){n&&window.FormData?(i.data=new FormData(t[0]),i.contentType=!1,i.processData=!1):i.data=t.serialize()};this.rbtn=function(t,i,r){return r===null&&(r=n),'<button type="button" class="'+t+'" '+r+">"+i+"<\/button>"};this.rdiv=function(t,i,r){return i===null&&(i=n),r===null&&(r=n),'<div class="'+t+'" '+r+">"+i+"<\/div>"};this.addFooter=function(n,t,i,r){if(n&&n.length){var f=n.length,u=$("<div/>").addClass(r);return $.each(n,function(n,t){var e=t.k?"btn-primary":"btn",f=$($kit.rbtn("btn "+e+" o-pbtn",t.text)),r;t.tag&&(r=t.tag,r.K&&$.each(r.K,function(n,t){f.attr(t,r.V[n])}));f.click(function(){t.click.call(i)});u.append(f)}),u}};this.addModelHeader=function(n){return'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><h4 class="modal-title">'+n+"<\/h4><\/div>"}};